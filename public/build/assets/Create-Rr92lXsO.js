import{a as t,b as f,j as a,M as j,r as s,U as v}from"./app-DgEW7bjf.js";import{A as N,B as w}from"./AuthenticatedLayout-Da3UDse7.js";import{S as B}from"./react-select.esm-CgPQ0gTh.js";import{U as S}from"./UseAppUrl-DMWYs7sm.js";const I=()=>{const c=S(),[i,d]=t.useState([]),[n,m]=t.useState(""),{data:u,setData:l,post:p,errors:y,reset:x,processing:h}=f({barangay_name:"",municipality_id:n}),g=async e=>{e.preventDefault(),await p(route("barangays.store"),{onSuccess:()=>{alert("Barangay was added successfully!"),x()},onError:r=>{console.log(r)}})},b=async()=>{try{const e=await axios.get(`${c}/api/municipality_options`);d(e.data)}catch(e){console.error("Error fetching barangays:",e),alert("Failed to fetch barangays.")}};t.useEffect(()=>{b()},[]);const o=i.map(e=>({value:e.id.toString(),label:e.municipality_name}));return a.jsxs(N,{children:[a.jsx(j,{title:"Add Address"}),a.jsx("div",{className:"bg-white overflow-y-auto max-h-[590px] grid place-justify-center ",children:a.jsx("div",{className:"mt-2 px-4",children:a.jsx("div",{className:"mb-6 flex justify-between items-center",children:a.jsxs(s.Card,{color:"white",className:" mx-auto w-full max-w-xl  p-8 shadow-md rounded-md mt-1 mb-2",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsx(s.Tooltip,{content:"Back",children:a.jsx(v,{href:"/address",className:"hover:bg-gray-200 px-2 py-1 rounded",children:a.jsx(w,{className:"text-xl cursor-pointer"})})})}),a.jsx(s.Typography,{variant:"h5",color:"blue-gray",className:"text-center",children:"Add Barangay"}),a.jsxs("form",{onSubmit:g,className:"mt-8 mb-2",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Barangay Name"}),a.jsx(s.Input,{size:"md",value:u.purok_name,onChange:e=>l("barangay_name",e.target.value),error:!!y.purok_name,className:"w-full"})]}),a.jsx("div",{className:" mb-3",children:a.jsxs("div",{children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Barangay"}),a.jsx(B,{value:o.find(e=>e.value===n),options:o,onChange:e=>{const r=(e==null?void 0:e.value)||"";m(r),l("municipality_id",r?parseInt(r,10):null)}})]})}),a.jsx(s.Button,{type:"submit",disabled:h,className:"mt-6 w-full",color:"blue",fullWidth:!0,children:"Save"})]})]})})})})," "]})};export{I as default};
