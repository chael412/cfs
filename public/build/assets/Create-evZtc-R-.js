import{a as t,b as f,j as a,M as j,r as s,U as v}from"./app-CzpXzm04.js";import{A as N,B as w}from"./AuthenticatedLayout-DdiryBAS.js";import{S as B}from"./react-select.esm-P7QgogFD.js";import{U as S}from"./UseAppUrl-TjchyqUf.js";import"./NavLink-CbeVwNRP.js";import"./index-C-A177l7.js";const M=()=>{const i=S(),[c,m]=t.useState([]),[n,d]=t.useState(""),{data:u,setData:l,post:p,errors:y,reset:g,processing:x}=f({barangay_name:"",municipality_id:n}),h=async e=>{e.preventDefault(),await p(route("barangays.store"),{onSuccess:()=>{alert("Barangay was added successfully!"),g()},onError:r=>{console.log(r)}})},b=async()=>{try{const e=await axios.get(`${i}/api/municipality_options`);m(e.data)}catch(e){console.error("Error fetching barangays:",e),alert("Failed to fetch barangays.")}};t.useEffect(()=>{b()},[]);const o=c.map(e=>({value:e.id.toString(),label:e.municipality_name}));return a.jsxs(N,{children:[a.jsx(j,{title:"Add Barangay"}),a.jsx("div",{className:"bg-white overflow-y-auto  grid place-justify-center ",children:a.jsx("div",{className:"mt-2 px-4",children:a.jsx("div",{className:"mb-6 flex justify-between items-center",children:a.jsxs(s.Card,{color:"white",className:" mx-auto w-full max-w-xl  p-8 shadow-md rounded-md mt-1 mb-2",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsx(s.Tooltip,{content:"Back",children:a.jsx(v,{href:"/admin/barangays",className:"hover:bg-gray-200 px-2 py-1 rounded",children:a.jsx(w,{className:"text-xl cursor-pointer"})})})}),a.jsx(s.Typography,{variant:"h5",color:"blue-gray",className:"text-center",children:"Add Barangay"}),a.jsxs("form",{onSubmit:h,className:"mt-8 mb-2",children:[a.jsx("div",{className:" mb-5",children:a.jsxs("div",{children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Municipality"}),a.jsx(B,{value:o.find(e=>e.value===n),options:o,onChange:e=>{const r=(e==null?void 0:e.value)||"";d(r),l("municipality_id",r?parseInt(r,10):null)}})]})}),a.jsxs("div",{className:"mb-3",children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Barangay Name"}),a.jsx(s.Input,{size:"md",value:u.purok_name,onChange:e=>l("barangay_name",e.target.value),error:!!y.purok_name,className:"w-full"})]}),a.jsx(s.Button,{type:"submit",disabled:x,className:"mt-6 w-full",color:"blue",fullWidth:!0,children:"Save"})]})]})})})})," "]})};export{M as default};
