import{a as n,b as j,j as a,M as v,r as s,U as N}from"./app-B7-ochgV.js";import{A as w,B}from"./AuthenticatedLayout-BAiGGxq0.js";import{S as _}from"./react-select.esm-DrrXJown.js";import{U as E}from"./UseAppUrl-BK4Et2hn.js";const M=({barangay:r})=>{const c=E();console.log(r.barangay_name);const[m,d]=n.useState([]),[i,u]=n.useState(r.municipality_id?r.municipality_id.toString():""),{data:p,setData:l,patch:y,errors:x,reset:h,processing:g}=j({barangay_name:r.barangay_name||"",municipality_id:i}),f=async e=>{e.preventDefault(),await y(route("barangays.update",r.id),{onSuccess:()=>{alert("Barangay was updated successfully!"),window.location.reload(),h()},onError:t=>{console.log(t)}})},b=async()=>{try{const e=await axios.get(`${c}/api/municipality_options`);d(e.data)}catch(e){console.error("Error fetching municipalies:",e),alert("Failed to fetch municipalities.")}};n.useEffect(()=>{b()},[]);const o=m.map(e=>({value:e.id.toString(),label:e.municipality_name}));return a.jsxs(w,{children:[a.jsx(v,{title:"Edit Barangay"}),a.jsx("div",{className:"bg-white overflow-y-auto max-h-[590px] grid place-justify-center ",children:a.jsx("div",{className:"mt-2 px-4",children:a.jsx("div",{className:"mb-6 flex justify-between items-center",children:a.jsxs(s.Card,{color:"white",className:" mx-auto w-full max-w-xl  p-8 shadow-md rounded-md mt-1 mb-2",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsx(s.Tooltip,{content:"Back",children:a.jsx(N,{href:"/barangays",className:"hover:bg-gray-200 px-2 py-1 rounded",children:a.jsx(B,{className:"text-xl cursor-pointer"})})})}),a.jsx(s.Typography,{variant:"h5",color:"blue-gray",className:"text-center",children:"Edit Barangay"}),a.jsxs("form",{onSubmit:f,className:"mt-8 mb-2",children:[a.jsx("div",{className:" mb-3",children:a.jsxs("div",{children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Municipality"}),a.jsx(_,{value:o.find(e=>e.value===i),options:o,onChange:e=>{const t=(e==null?void 0:e.value)||"";u(t),l("municipality_id",t?parseInt(t,10):null)}})]})}),a.jsxs("div",{className:"mb-3",children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Barangay Name"}),a.jsx(s.Input,{size:"md",value:p.barangay_name,onChange:e=>l("barangay_name",e.target.value),error:!!x.barangay_name,className:"w-full"})]}),a.jsx(s.Button,{type:"submit",disabled:g,className:"mt-6 w-full",color:"blue",fullWidth:!0,children:"Update"})]})]})})})})," "]})};export{M as default};
