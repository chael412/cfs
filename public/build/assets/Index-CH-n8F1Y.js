import{a as t,j as e,M as b,r as y,c as j}from"./app-CjXrxXZN.js";import{A as g}from"./AuthenticatedLayout-cj1QF1Tk.js";import{l as N}from"./index-BWpBWK7A.js";import{U as u}from"./UseAppUrl-CI1iIKVE.js";import"./NavLink-BH-pNJXi.js";import"./index-CScpL3QF.js";const D=()=>{var i;const x=u(),[s,l]=t.useState(null),[a,m]=t.useState(""),[n,d]=t.useState(!1),o=t.useRef(),p=N.useReactToPrint({contentRef:o}),c=async()=>{if(a){d(!0);try{const r=await j.get(`${x}/api/customer_soa?search=${a}`);console.log(r.data),l(r.data.customer)}catch(r){console.error("Error fetching SOA:",r),l(null)}finally{d(!1)}}},h=r=>{r.key==="Enter"&&(r.preventDefault(),c())};return e.jsxs(g,{children:[e.jsx(b,{title:"Customer Soa"}),e.jsxs("div",{className:"max-w-4xl mx-auto mt-6 mb-4 flex items-center gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"flex",children:e.jsx("input",{type:"number",placeholder:"Enter Customer No...",value:a,onChange:r=>m(r.target.value),onKeyDown:h,className:"border border-gray-400 rounded-md px-3 py-2 w-[380px]"})}),e.jsx("button",{onClick:c,className:"bg-sky-600 hover:bg-sky-700 text-white px-4 py-2 rounded-md bg-blue-600",children:"Search"})]}),e.jsx(y.Button,{variant:"gradient",className:"w-[180px]",color:"green",onClick:()=>p(),children:"Print"})]}),n&&e.jsx("div",{className:"p-8 text-center text-gray-600",children:"Loading..."}),!n&&s===null&&a&&e.jsxs("div",{className:"p-8 text-center text-red-500",children:["No data found for customer ID: ",a]}),s&&e.jsx("div",{className:"overflow-y-auto max-h-[590px]  bg-white text-black max-w-4xl mx-auto border border-gray-400 shadow-md",children:e.jsxs("div",{ref:o,className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"font-bold text-lg",children:"CFS INTERNET NETWORK SOLUTION"}),e.jsxs("p",{className:"text-sm",children:["#2, Managuelod Bldg. National High Way ",e.jsx("br",{}),"District II, Tumauini, Isabela."]}),e.jsx("p",{className:"text-sm",children:"TIN: 295-973-965-001    CP#: 09453367030"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Printed Date:"})," ",e.jsx("span",{children:new Date().toLocaleDateString()})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Account No.:"})," ",e.jsx("span",{children:s.id})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Client Name:"})," ",e.jsx("span",{children:`${s.firstname} ${s.lastname}`})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Contact No:"})," ",e.jsx("span",{children:s.contact_no})]})]}),s.customer_plans.length>0&&e.jsxs("table",{className:"w-full border-collapse border border-gray-400 text-sm mb-8",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Date of Registration"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Day of Billing"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"MBPS"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Plan Price"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1 h-8",children:s.customer_plans[0].date_registration}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.customer_plans[0].date_billing}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.customer_plans[0].plan.mbps}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:["₱",s.customer_plans[0].plan.plan_price]})]})})]}),e.jsx("h3",{className:"text-center font-bold mb-2",children:"STATEMENT OF ACCOUNT"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-400 text-sm mb-12",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Bill No."}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Month/Year"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Billing Date"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Plan Price"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Payment"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Outstanding Balance"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Remarks"})]})}),e.jsx("tbody",{children:(i=s.customer_plans[0])==null?void 0:i.transactions.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.bill_no}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:new Date(r.date_billing).toLocaleString("default",{month:"long",year:"numeric"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.date_billing}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:["₱",r.plan_price]}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:["₱",r.bill_amount]}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:["₱",r.outstanding_balance]}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.remarks})]},r.id))})]})]})})]})};export{D as default};
