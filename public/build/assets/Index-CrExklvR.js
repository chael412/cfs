import{a,V as D,j as e,M as w,r as p,c as $}from"./app-HIIT8Ax7.js";import{A as C,b as k,c as P}from"./AuthenticatedLayout-BJ1YJQB8.js";import{u as A}from"./useQuery-CpN5Dpgg.js";import{U as E}from"./UseAppUrl-zhpSJf_e.js";const G=()=>{const f=E(),[h,I]=a.useState("month"),[c,y]=a.useState(""),[m,_]=a.useState(""),j=async({queryKey:t})=>{const[u,r,n,l,o,i,N,S]=t,g=new Date().toISOString().split("T")[0];return(await $.get(`${f}/api/raw_collections`,{params:{page:r,lastname:n,sortColumn:l,sortDirection:o,filter:i,start_date:N||g,end_date:S||g}})).data},{customers:d}=D().props,[b,T]=a.useState(""),[v,L]=a.useState((d==null?void 0:d.current_page)||1),[x,O]=a.useState({column:"",direction:"asc"}),{data:s,error:U,isLoading:q,refetch:z}=A({queryKey:["collections",v,b,x.column,x.direction,h,c,m],queryFn:j,keepPreviousData:!0});return console.log(s),s!=null&&s.data.map(t=>{var u,r,n,l,o,i;return{id:t.id,customer_name:`${t.customer_plan.customer.lastname} ${t.customer_plan.customer.firstname} ${t.customer_plan.customer.middlename??""} `,collector_name:`${t.customer_plan.collector.lastname} ${t.customer_plan.collector.firstname} ${t.customer_plan.collector.middlename??""} `,address:`${((u=t.customer_plan.customer.purok)==null?void 0:u.purok_name)??""}, ${((n=(r=t.customer_plan.customer.purok)==null?void 0:r.barangay)==null?void 0:n.barangay_name)??""}, ${((i=(o=(l=t.customer_plan.customer.purok)==null?void 0:l.barangay)==null?void 0:o.municipality)==null?void 0:i.municipality_name)??""}`,bill_no:t.bill_no,date_billing:new Date(t.date_billing).toLocaleDateString("en-PH"),outstanding_balance:t.outstanding_balance,bill_amount:t.bill_amount}}),e.jsxs(C,{children:[e.jsx(w,{title:"Collections"}),e.jsx("div",{className:"bg-white overflow-y-auto max-h-[590px]",children:e.jsxs("div",{className:"mt-5  px-4",children:[e.jsx("div",{className:"mb-6 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx(p.Typography,{variant:"lead",size:"small",className:"mb-0 text-lg font-bold",children:"Collections"}),e.jsx(p.Typography,{className:"text-sm",variant:"paragraph",size:"small",children:"Manage collections"})]})}),e.jsxs("div",{className:"w-full  flex items-center justify-center flex-col-reverse gap-6 lg:flex-row",children:[e.jsx("div",{className:"flex gap-4"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Start Date"}),e.jsx("input",{type:"date",value:c,onChange:t=>y(t.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"End Date"}),e.jsx("input",{type:"date",value:m,onChange:t=>_(t.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg"})]})]}),e.jsx("div",{children:e.jsx("a",{href:route("collections.show",{start_date:c||new Date().toISOString().split("T")[0],end_date:m||new Date().toISOString().split("T")[0]}),target:"_blank",children:e.jsxs(p.Button,{className:"flex gap-2 items-center",color:"blue",size:"md",children:[e.jsx(k,{className:"text-lg"}),"Preview"]})})})]}),e.jsxs("div",{className:"flex justify-center flex-col items-center mt-12",children:[e.jsx(P,{className:"text-9xl"}),"Filter to show collection"]})]})})]})};export{G as default};
