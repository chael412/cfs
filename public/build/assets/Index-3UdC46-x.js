import{a as s,V as T,c as u,j as e,M as U,r as c}from"./app-DLDUMbf_.js";import{d as O}from"./NavLink-_jzZh8Kt.js";import{a as k}from"./index-5Q2pxwOT.js";import{A as q}from"./AuthenticatedLayout-DISThC0w.js";import{u as z}from"./useQuery-672SsFBK.js";import{U as F}from"./UseAppUrl-CvaWbRTv.js";const X=()=>{const i=F(),[m,M]=s.useState("month"),[a,p]=s.useState(""),[l,h]=s.useState(""),[r,g]=s.useState(""),[o,f]=s.useState(""),[j,v]=s.useState([]),y=async({queryKey:t})=>{const[R,b,C,w,D,_,I,A,P,E]=t,x=new Date().toISOString().split("T")[0];return(await u.get(`${i}/api/raw_collections`,{params:{page:b,lastname:C,sortColumn:w,sortDirection:D,filter:_,start_date:I||x,end_date:A||x,status:P,collector_id:E||""}})).data},{customers:n}=T().props,[N,Q]=s.useState(""),[S,$]=s.useState((n==null?void 0:n.current_page)||1),[d,L]=s.useState({column:"",direction:"asc"});return z({queryKey:["collections",S,N,d.column,d.direction,m,a,l,r,o],queryFn:y,keepPreviousData:!0}),s.useEffect(()=>{u.get(`${i}/api/collectors`).then(t=>{v(t.data)})},[]),e.jsxs(q,{children:[e.jsx(U,{title:"Collections"}),e.jsx("div",{className:"bg-white overflow-y-auto max-h-[590px]",children:e.jsxs("div",{className:"mt-5 px-4",children:[e.jsx("div",{className:"mb-6 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx(c.Typography,{variant:"lead",size:"small",className:"mb-0 text-lg font-bold",children:"Collections"}),e.jsx(c.Typography,{className:"text-sm",variant:"paragraph",size:"small",children:"Manage collections"})]})}),e.jsxs("div",{className:"w-full flex items-center justify-center flex-col-reverse gap-6 lg:flex-row",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Start Date"}),e.jsx("input",{type:"date",value:a,onChange:t=>p(t.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"End Date"}),e.jsx("input",{type:"date",value:l,onChange:t=>h(t.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Collector"}),e.jsxs("select",{value:o,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"",children:"All Collectors"}),j.map(t=>e.jsxs("option",{value:t.id,children:[t.firstname," ",t.lastname]},t.id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Status"}),e.jsxs("select",{value:r,onChange:t=>g(t.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"unpaid",children:"Unpaid"})]})]}),e.jsx("div",{children:e.jsx("a",{href:route("collections.show",{start_date:a||new Date().toISOString().split("T")[0],end_date:l||new Date().toISOString().split("T")[0],collector_id:o||"",status:r}),target:"_blank",children:e.jsxs(c.Button,{className:"flex gap-2 items-center",color:"blue",size:"md",children:[e.jsx(k,{className:"text-lg"}),"Preview"]})})})]}),e.jsxs("div",{className:"flex justify-center flex-col items-center mt-12",children:[e.jsx(O,{className:"text-9xl"}),"Filter to show collection"]})]})})]})};export{X as default};
