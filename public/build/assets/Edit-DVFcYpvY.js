import{a as n,b as f,j as a,M as j,r as s,U as v}from"./app-CPbRTNv3.js";import{A as N,B as _}from"./AuthenticatedLayout-DNDdEP45.js";import{S as w}from"./react-select.esm-26uNbWNQ.js";import{U as A}from"./UseAppUrl-COvxHlik.js";const C=({purok:r})=>{const i=A(),[d,m]=n.useState([]),[u,p]=n.useState(r.barangay_id?r.barangay_id.toString():""),{data:o,setData:l,patch:x,errors:g,reset:B,processing:h}=f({purok_name:r.purok_name||"",barangay_id:r.barangay_id});console.log(r);const y=async e=>{e.preventDefault(),console.log(o),await x(route("address.update",r.id),{onSuccess:()=>{alert("Address was updated successfully!")},onError:t=>{console.log(t)}})},b=async()=>{try{const e=await axios.get(`${i}/api/barangay_options`);m(e.data)}catch(e){console.error("Error fetching barangays:",e),alert("Failed to fetch barangays.")}};n.useEffect(()=>{b()},[]);const c=d.map(e=>({value:e.id.toString(),label:e.barangay_name+" - "+e.municipality.municipality_name}));return a.jsxs(N,{children:[a.jsx(j,{title:"Edit Address"}),a.jsx("div",{className:"bg-white overflow-y-auto max-h-[590px] grid place-justify-center ",children:a.jsx("div",{className:"mt-2 px-4",children:a.jsx("div",{className:"mb-6 flex justify-between items-center",children:a.jsxs(s.Card,{color:"white",className:" mx-auto w-full max-w-xl  p-8 shadow-md rounded-md mt-1 mb-2",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsx(s.Tooltip,{content:"Back",children:a.jsx(v,{href:"/address",className:"hover:bg-gray-200 px-2 py-1 rounded",children:a.jsx(_,{className:"text-xl cursor-pointer"})})})}),a.jsx(s.Typography,{variant:"h5",color:"blue-gray",className:"text-center",children:"Edit Address"}),a.jsxs("form",{onSubmit:y,className:"mt-8 mb-2",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Purok Name"}),a.jsx(s.Input,{size:"md",value:o.purok_name,onChange:e=>l("purok_name",e.target.value),error:!!g.purok_name,className:"w-full"})]}),a.jsx("div",{className:" mb-3",children:a.jsxs("div",{children:[a.jsx(s.Typography,{variant:"paragraph",color:"blue-gray",className:"mb-1 ",children:"Address"}),a.jsx(w,{value:c.find(e=>e.value===u),options:c,onChange:e=>{const t=(e==null?void 0:e.value)||"";p(t),l("barangay_id",t?parseInt(t,10):null)}})]})}),a.jsx(s.Button,{type:"submit",disabled:h,className:"mt-6 w-full",color:"blue",fullWidth:!0,children:"Update"})]})]})})})})]})};export{C as default};
